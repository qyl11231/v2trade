# 前端技术规范

## 1. 技术栈

### 1.1 核心框架
- **Layui 2.9.21**: 主要UI框架，提供丰富的组件和样式
- **原生JavaScript**: 业务逻辑实现
- **HTML5/CSS3**: 页面结构和样式

### 1.2 第三方依赖
- **Layui CDN**: https://cdn.jsdelivr.net/npm/layui@2.9.21/
- **无其他前端构建工具**: 直接使用静态HTML文件方式

## 2. 项目结构

```
src/main/resources/static/
├── index.html          # 首页
├── login.html          # 登录页
├── settings.html       # 个人设置页
├── users.html          # 用户管理页
├── apikey.html         # API密钥管理页
└── js/
    └── common.js       # 公共JS工具函数
```

## 3. 编码规范

### 3.1 HTML规范
- 使用HTML5 DOCTYPE声明
- 统一使用UTF-8编码
- 所有页面遵循响应式设计原则
- 使用语义化标签提高可读性

### 3.2 CSS规范
- 使用Layui提供的CSS类名
- 自定义样式使用简洁明了的命名
- 颜色值统一使用十六进制表示法
- 优先使用Layui内置样式，减少自定义CSS

### 3.3 JavaScript规范
- 使用ES5语法确保兼容性
- 函数命名采用驼峰命名法
- 变量命名清晰表达用途
- 适当添加注释说明复杂逻辑

## 4. UI组件规范

### 4.1 布局组件
- 使用Layui的admin布局模板
- 头部导航栏统一风格
- 侧边栏菜单结构一致
- 内容区域使用卡片式布局

### 4.2 表单组件
- 表单元素统一使用Layui样式
- 必填项使用`lay-verify="required"`验证
- 表单提交使用Layui的form模块处理
- 表单验证失败时给出明确提示

### 4.3 表格组件
- 数据表格使用Layui table组件
- 表头固定，内容可滚动
- 操作列按钮统一使用小尺寸
- 空数据时显示友好提示

### 4.4 弹窗组件
- 使用Layui的layer弹窗
- 确认操作前进行二次确认
- 弹窗内容居中显示
- 关闭弹窗后刷新相关数据

## 5. 交互规范

### 5.1 页面跳转
- 登录状态检查在页面加载时进行
- 未登录用户自动跳转到登录页
- 登录成功后跳转到首页
- 退出登录清除本地存储并跳转

### 5.2 数据请求
- 使用封装的[request](file:///D:/okx_trade/qyl/v2-trade/src/main/resources/static/js/common.js#L38-L70)函数发送AJAX请求
- 请求头自动添加用户ID信息
- 统一处理响应结果和错误信息
- 加载数据时显示loading状态

### 5.3 状态管理
- 用户信息存储在localStorage中
- 使用[getCurrentUser()](file:///D:/okx_trade/qyl/v2-trade/src/main/resources/static/js/common.js#L6-L9)获取用户信息
- 使用[setCurrentUser()](file:///D:/okx_trade/qyl/v2-trade/src/main/resources/static/js/common.js#L11-L14)设置用户信息
- 使用[clearCurrentUser()](file:///D:/okx_trade/qyl/v2-trade/src/main/resources/static/js/common.js#L16-L19)清除用户信息

## 6. 安全规范

### 6.1 认证安全
- 所有页面进行登录状态检查
- 敏感操作进行二次确认
- 密码传输使用HTTPS协议
- API密钥等敏感信息在启用状态下不允许编辑

### 6.2 数据安全
- 前端只存储必要的用户信息
- 不在前端存储密码等敏感数据
- 敏感操作需要服务端再次验证权限

## 7. 性能优化

### 7.1 资源加载
- 使用CDN加速Layui资源加载
- 静态资源按需引入
- 减少HTTP请求数量

### 7.2 代码优化
- 合理使用事件委托减少内存占用
- 及时清理不需要的事件监听器
- 避免频繁DOM操作

## 8. 浏览器兼容性

- 支持主流现代浏览器
- IE浏览器支持IE11及以上版本
- 移动端适配主要屏幕尺寸

## 9. 错误处理

### 9.1 网络错误
- 统一处理网络异常情况
- 显示友好的错误提示信息
- 提供重试机制

### 9.2 业务错误
- 根据返回码处理不同业务场景
- 401错误自动跳转登录页
- 其他错误显示具体错误信息

## 10. 开发建议

1. 新增页面时参考现有页面结构
2. 复用已有组件和函数
3. 保持代码风格一致性
4. 适当添加注释便于维护
5. 测试各种边界情况