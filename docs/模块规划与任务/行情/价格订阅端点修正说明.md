# 价格订阅端点修正说明

## 问题

收到OKX API错误：
```json
{
  "event": "error",
  "msg": "Wrong URL or channel:ticker,instId:BTC-USDT-SWAP doesn't exist. Please use the correct URL, channel and parameters referring to API document.",
  "code": "60018"
}
```

错误说明：在 `/ws/v5/public` 端点上，ticker频道不支持SWAP合约（BTC-USDT-SWAP）。

## 解决方案

**修改PriceWebSocketManager使用 `/ws/v5/business` 端点**

### 原因

根据错误信息和OKX API的实际情况：
- `/ws/v5/public` 端点的ticker频道可能只支持现货（SPOT）
- `/ws/v5/business` 端点支持合约（SWAP/FUTURES）的ticker订阅
- K线和ticker在business端点都可以使用

### 修改内容

已修改 `PriceWebSocketManager.java`：
- 将WebSocket连接URL从 `wss://ws.okx.com:8443/ws/v5/public` 
- 改为 `wss://ws.okx.com:8443/ws/v5/business`

### 影响

- 价格订阅和K线订阅使用相同的端点（/ws/v5/business）
- 但使用不同的WebSocket连接（PriceWebSocketManager 和 ExchangeWebSocketManager）
- 两个连接独立管理，互不干扰

### 验证

重启应用后，应该能够成功订阅SWAP合约的ticker频道。














