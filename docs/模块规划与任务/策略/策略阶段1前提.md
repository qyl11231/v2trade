⚠️ 前提 1：逻辑状态必须是“唯一事实源”

你已经做对 90%，还差一句铁律：

logic_state 是策略对世界的唯一记忆

必须保证：

任意决策前 → 只读 logic_state

任意决策后 → 原子更新 logic_state

不允许“只存在内存中”的状态

⚠️ 前提 2：实例生命周期必须可控

生产中你一定会遇到：

手动停策略

修改参数

禁用交易对

你必须定义：

CREATED → RUNNING → STOPPED → DESTROYED


否则你会出现：

幽灵策略实例（内存里还在，DB 已删）

⚠️ 前提 3：阶段边界不能被破坏

这是最容易“慢慢腐烂”的地方。

你必须在工程上保证：

行为	是否允许
阶段 1 写 decision_record	❌
阶段 1 改 signal 状态	❌
阶段 1 拉行情	❌
阶段 1 做计算	❌

👉 这是你系统“可维护 2 年 vs 2 周”的分水岭